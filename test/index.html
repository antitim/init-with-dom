<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf8">
		<title>init with DOM - Test page</title>
	</head>
	<body data-js="page">
		<div data-js="time"></div>
		<div data-js="b" data-text="Hello"></div>
		<div data-js="creator" data-message="Added after init:"></div>
		<script>
			function b (params) {
				var self = this;
				var render = function () {
					self.innerHTML = '<b>' + self.getAttribute('data-text') + '</b>';
				}

				self.addEventListener('iwdUpdate', function (e) {
					console.log(e.detail)
					render();
				})

				render();
			}
			function page () {
				var self = this;
				var element = document.createElement('span');
				element.innerText = 'js on body'
				self.appendChild(element);
				self.setAttribute('data-gg', 'fdsfs');
			}
			function time () {
				var self = this;
				var seconds;

				setInterval(function () {
					var dt = new Date();

					if (seconds !== dt.getSeconds()) {
						self.innerText = dt.getHours() + ':' + dt.getMinutes() + ':' + dt.getSeconds();
					}
					seconds = dt.getSeconds();
				}, 100)
			}
			function creator (params) {
				var self = this;

				var block1 = document.createElement('div');
				block1.setAttribute('data-js', 'time');

				var block2 = document.createElement('div');
				block2.innerText = params.data.message;

				self.appendChild(block2);
				self.appendChild(block1);
			}
		</script>
		<script src="../build/iwd.min.js"></script>
	</body>
</html>